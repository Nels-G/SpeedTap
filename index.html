<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypingBoi - Test de Vitesse Ultime</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500;600&display=swap');

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --accent-primary: #00d4ff;
            --accent-secondary: #ff6b6b;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --text-muted: #666666;
            --correct: #00ff88;
            --incorrect: #ff4757;
            --current: #00d4ff;
            --border: #333333;
            --shadow: rgba(0, 212, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Landing Page */
        .landing {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            background: radial-gradient(ellipse at top, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(ellipse at bottom right, rgba(255, 107, 107, 0.1) 0%, transparent 50%);
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--accent-primary);
            border-radius: 50%;
            animation: float 6s infinite ease-in-out;
            opacity: 0.6;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.6; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
        }

        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 0;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--accent-primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-primary);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .hero {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 120px 20px 60px;
            position: relative;
            z-index: 2;
        }

        .hero-content {
            max-width: 800px;
        }

        .hero h1 {
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
        }

        .hero p {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 18px 36px;
            background: linear-gradient(135deg, var(--accent-primary), #0099cc);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .cta-button:hover::before {
            left: 100%;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 212, 255, 0.4);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .feature-card {
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            padding: 40px 30px;
            border-radius: 20px;
            border: 1px solid var(--border);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.05), rgba(255, 107, 107, 0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent-primary);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.2);
        }

        .feature-icon {
            font-size: 3rem;
            color: var(--accent-primary);
            margin-bottom: 20px;
        }

        .feature-card h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Game Container */
        .game-wrapper {
            display: none;
            min-height: 100vh;
            padding: 100px 20px 40px;
            background: var(--bg-primary);
        }

        .game-container {
            max-width: 900px;
            margin: 0 auto;
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 25px;
            padding: 40px;
            border: 1px solid var(--border);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .game-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        }

        .game-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .game-header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid var(--border);
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.2);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--accent-primary);
            font-family: 'JetBrains Mono', monospace;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 5px;
            font-weight: 500;
        }

        .text-display {
            background: var(--bg-primary);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--border);
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.4rem;
            line-height: 2;
            margin-bottom: 25px;
            min-height: 140px;
            position: relative;
        }

        .char {
            position: relative;
            transition: all 0.1s ease;
        }

        .char.correct {
            background: var(--correct);
            color: var(--bg-primary);
            border-radius: 3px;
        }

        .char.incorrect {
            background: var(--incorrect);
            color: white;
            border-radius: 3px;
        }

        .char.current {
            background: var(--current);
            color: var(--bg-primary);
            border-radius: 3px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .input-area {
            width: 100%;
            padding: 20px;
            background: var(--bg-primary);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            resize: none;
            outline: none;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .input-area:focus {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.2);
        }

        .input-area:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-primary), #0099cc);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--accent-secondary), #e55656);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--correct), #00cc66);
            color: var(--bg-primary);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .difficulty-selector {
            margin-bottom: 30px;
            text-align: center;
        }

        .difficulty-selector select {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
        }

        /* Popup Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
        }

        .results-modal {
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 25px;
            padding: 40px;
            border: 1px solid var(--border);
            max-width: 500px;
            width: 90%;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .modal-overlay.show .results-modal {
            transform: scale(1);
        }

        .results-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        }

        .results-header {
            margin-bottom: 30px;
        }

        .results-header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .trophy-icon {
            font-size: 4rem;
            color: #ffd700;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-stat {
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-primary);
            font-family: 'JetBrains Mono', monospace;
        }

        .result-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .close-modal {
            background: linear-gradient(135deg, var(--accent-primary), #0099cc);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .close-modal:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.3);
        }

        .back-to-home {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1001;
            display: none;
        }

        .back-to-home:hover {
            background: var(--accent-primary);
            color: var(--bg-primary);
        }

        /* History Section */
        .history-container {
            max-width: 900px;
            margin: 40px auto;
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 25px;
            padding: 40px;
            border: 1px solid var(--border);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .history-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .history-header h3 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .history-item {
            background: var(--bg-primary);
            padding: 15px 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .history-wpm {
            font-weight: 700;
            color: var(--accent-primary);
            font-family: 'JetBrains Mono', monospace;
        }

        .history-details {
            display: flex;
            gap: 20px;
        }

        .history-detail {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .history-value {
            font-weight: 600;
        }

        .history-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .clear-history {
            margin-top: 30px;
            text-align: center;
        }

        /* Game Mode Selector */
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .mode-btn {
            padding: 10px 20px;
            border-radius: 8px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: var(--accent-primary);
            color: var(--bg-primary);
            border-color: var(--accent-primary);
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero h1 {
                font-size: 3rem;
            }
            
            .features {
                grid-template-columns: 1fr;
                padding: 40px 20px;
            }
            
            .game-container {
                padding: 25px;
                margin: 20px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .results-stats {
                grid-template-columns: 1fr;
            }

            .history-details {
                gap: 10px;
                flex-wrap: wrap;
                justify-content: flex-end;
            }

            .history-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .history-detail {
                flex-direction: row;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Landing Page -->
    <div class="landing" id="landing">
        <div class="particles" id="particles"></div>
        
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">TypingBoi</div>
                <ul class="nav-links">
                    <li><a href="#features">Fonctionnalités</a></li>
                    <li><a href="#" onclick="startTypingTest()">Commencer</a></li>
                </ul>
            </div>
        </nav>

        <div class="hero">
            <div class="hero-content">
                <h1>TypingBoi</h1>
                <p>Maîtrisez l'art de la frappe avec notre test de vitesse ultime. Défiez vos limites et atteignez des sommets inégalés.</p>
                <a href="#" class="cta-button" onclick="startTypingTest()">
                    <i class="fas fa-rocket"></i>
                    Commencer le test
                </a>
            </div>
        </div>

        <div class="features" id="features">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-stopwatch"></i>
                </div>
                <h3>Chronométrage Précis</h3>
                <p>Mesurez votre vitesse avec une précision milliseconde pour des résultats fiables</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Statistiques Avancées</h3>
                <p>Suivez votre progression avec des métriques détaillées et des analyses complètes</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3>Niveaux Adaptatifs</h3>
                <p>Trois niveaux de difficulté pour challenger vos compétences à chaque étape</p>
            </div>
        </div>
    </div>

    <!-- Game Section -->
    <div class="game-wrapper" id="gameWrapper">
        <button class="back-to-home" id="backToHome" onclick="goHome()">
            <i class="fas fa-arrow-left"></i> Accueil
        </button>
        
        <div class="game-container">
            <div class="game-header">
                <h2>Test de Vitesse</h2>
                <div class="mode-selector">
                    <button class="mode-btn active" id="timeModeBtn" onclick="typingGame.setGameMode('time')">
                        <i class="fas fa-clock"></i> Contre-la-montre
                    </button>
                    <button class="mode-btn" id="textModeBtn" onclick="typingGame.setGameMode('text')">
                        <i class="fas fa-align-left"></i> Texte complet
                    </button>
                </div>
                <div class="difficulty-selector">
                    <label for="difficulty">Niveau : </label>
                    <select id="difficulty">
                        <option value="easy">Facile</option>
                        <option value="medium" selected>Moyen</option>
                        <option value="hard">Difficile</option>
                    </select>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="wpm">0</div>
                    <div class="stat-label">MPM</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="accuracy">100%</div>
                    <div class="stat-label">Précision</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="time">60</div>
                    <div class="stat-label">Temps</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="errors">0</div>
                    <div class="stat-label">Erreurs</div>
                </div>
            </div>

            <div class="text-display" id="textDisplay"></div>

            <textarea 
                class="input-area" 
                id="inputArea" 
                placeholder="Cliquez sur 'Commencer' puis tapez ici..."
                disabled
                rows="3"
            ></textarea>

            <div class="controls">
                <button class="btn btn-primary" id="startBtn">
                    <i class="fas fa-play"></i> Commencer
                </button>
                <button class="btn btn-secondary" id="resetBtn">
                    <i class="fas fa-redo"></i> Recommencer
                </button>
                <button class="btn btn-success" id="newTextBtn">
                    <i class="fas fa-sync"></i> Nouveau Texte
                </button>
            </div>
        </div>

        <!-- History Section -->
        <div class="history-container" id="historyContainer">
            <div class="history-header">
                <h3>Votre Historique</h3>
                <p>Consultez vos performances passées et suivez votre progression</p>
            </div>
            <div class="history-list" id="historyList">
                <!-- History items will be added here dynamically -->
            </div>
            <div class="clear-history">
                <button class="btn btn-secondary" onclick="typingGame.clearHistory()">
                    <i class="fas fa-trash"></i> Effacer l'historique
                </button>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="results-modal">
            <div class="results-header">
                <div class="trophy-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2>Résultats</h2>
                <p>Félicitations pour votre performance !</p>
            </div>
            
            <div class="results-stats">
                <div class="result-stat">
                    <div class="result-value" id="finalWpm">0</div>
                    <div class="result-label">MPM</div>
                </div>
                <div class="result-stat">
                    <div class="result-value" id="finalAccuracy">0%</div>
                    <div class="result-label">Précision</div>
                </div>
                <div class="result-stat">
                    <div class="result-value" id="finalErrors">0</div>
                    <div class="result-label">Erreurs</div>
                </div>
                <div class="result-stat">
                    <div class="result-value" id="finalChars">0</div>
                    <div class="result-label">Caractères</div>
                </div>
            </div>
            
            <button class="close-modal" onclick="closeModal()">
                <i class="fas fa-check"></i> Continuer
            </button>
        </div>
    </div>

    <script>
        // Particle animation
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const numberOfParticles = 50;

            for (let i = 0; i < numberOfParticles; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Initialize particles on load
        createParticles();

        // Navigation functions
        function startTypingTest() {
            document.getElementById('landing').style.display = 'none';
            document.getElementById('gameWrapper').style.display = 'block';
            document.getElementById('backToHome').style.display = 'block';
            typingGame.generateNewText();
            typingGame.loadHistory();
        }

        function goHome() {
            document.getElementById('landing').style.display = 'flex';
            document.getElementById('gameWrapper').style.display = 'none';
            document.getElementById('backToHome').style.display = 'none';
            typingGame.resetGame();
        }

        // Modal functions
        function showModal() {
            const modal = document.getElementById('modalOverlay');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }

        function closeModal() {
            const modal = document.getElementById('modalOverlay');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 300);
        }

        // Typing Game Class
        class TypingGame {
            constructor() {
                this.texts = {
                    easy: [
                        "le chat mange sa nourriture dans le jardin",
                        "je vais au marché acheter des fruits frais",
                        "la voiture rouge roule sur la route",
                        "nous aimons lire des livres le soir",
                        "les enfants jouent dans le parc avec joie",
                        "il fait beau temps aujourd'hui",
                        "elle prépare un bon repas pour la famille",
                        "nous regardons un film ce soir ensemble",
                        "le soleil brille dans le ciel bleu",
                        "la pluie tombe doucement sur les toits",
                        "j'aime boire du café le matin",
                        "les oiseaux chantent dans les arbres",
                        "mon livre préféré est sur l'étagère",
                        "la pizza est chaude et délicieuse",
                        "je marche dans la forêt chaque dimanche",
                        "la musique me rend heureux et détendu"
                    ],
                    medium: [
                        "l'intelligence artificielle transforme notre façon de travailler et de communiquer avec les autres",
                        "les technologies modernes permettent de résoudre des problèmes complexes rapidement",
                        "la programmation informatique nécessite de la logique et beaucoup de créativité",
                        "les réseaux sociaux influencent notre comportement quotidien de manière significative",
                        "l'écologie devient un enjeu majeur pour les générations futures et présentes",
                        "la médecine évolue grâce aux nouvelles découvertes scientifiques révolutionnaires",
                        "l'éducation doit s'adapter aux besoins du monde moderne et technologique",
                        "la globalisation économique crée de nouveaux défis pour tous les pays",
                        "le développement durable est essentiel pour préserver notre planète",
                        "la cybersécurité est un domaine en constante évolution et d'importance cruciale",
                        "les algorithmes d'apprentissage automatique révolutionnent de nombreux secteurs",
                        "la réalité virtuelle offre des possibilités immersives impressionnantes",
                        "les énergies renouvelables sont l'avenir de la production électrique mondiale",
                        "la blockchain introduit de nouveaux paradigmes dans les transactions numériques",
                        "les neurosciences explorent les mystères du cerveau humain",
                        "la conquête spatiale repousse continuellement les limites de l'exploration"
                    ],
                    hard: [
                        "l'épistémologie contemporaine questionne fondamentalement les bases de la connaissance scientifique moderne",
                        "la phénoménologie herméneutique révolutionne l'approche philosophique traditionnelle occidentale",
                        "l'interconnectivité systémique caractérise les paradigmes organisationnels contemporains complexes",
                        "l'obsolescence programmée soulève des préoccupations environnementales considérables et durables",
                        "la neuroplasticité démontre l'extraordinaire adaptabilité du cerveau humain face aux changements",
                        "l'algorithme d'apprentissage automatique optimise les processus décisionnels organisationnels",
                        "la cryptographie quantique révolutionne complètement la sécurité informatique mondiale",
                        "l'anthropocène marque une nouvelle ère géologique caractérisée par l'influence humaine",
                        "la déconstruction postmoderne remet en question les métarécits traditionnels de la modernité",
                        "l'ontologie computationnelle redéfinit les cadres conceptuels de la représentation des connaissances",
                        "la théorie des jeux évolutifs modélise les dynamiques stratégiques des systèmes adaptatifs",
                        "l'épigénétique révèle les mécanismes moléculaires de l'hérédité non génomique",
                        "la thermodynamique des systèmes ouverts appliquée aux phénomènes biologiques complexes",
                        "la relativité générale einsteinienne décrit la géométrie dynamique de l'espace-temps courbe",
                        "l'émergence computationnelle dans les systèmes multi-agents distribués asynchrones",
                        "la mécanique quantique relativiste unifie les principes de la physique fondamentale"
                    ]
                };

                this.currentText = '';
                this.currentIndex = 0;
                this.startTime = null;
                this.endTime = null;
                this.timer = null;
                this.timeLeft = 60;
                this.isGameActive = false;
                this.errors = 0;
                this.totalTyped = 0;
                this.gameMode = 'time'; // 'time' or 'text'
                this.history = JSON.parse(localStorage.getItem('typingHistory')) || [];

                this.initializeElements();
                this.setupEventListeners();
                this.generateNewText();
            }

            initializeElements() {
                this.textDisplay = document.getElementById('textDisplay');
                this.inputArea = document.getElementById('inputArea');
                this.startBtn = document.getElementById('startBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.newTextBtn = document.getElementById('newTextBtn');
                this.difficultySelect = document.getElementById('difficulty');
                this.timeModeBtn = document.getElementById('timeModeBtn');
                this.textModeBtn = document.getElementById('textModeBtn');
                this.historyList = document.getElementById('historyList');

                this.wpmDisplay = document.getElementById('wpm');
                this.accuracyDisplay = document.getElementById('accuracy');
                this.timeDisplay = document.getElementById('time');
                this.errorsDisplay = document.getElementById('errors');
            }

            setupEventListeners() {
                this.startBtn.addEventListener('click', () => this.startGame());
                this.resetBtn.addEventListener('click', () => this.resetGame());
                this.newTextBtn.addEventListener('click', () => this.generateNewText());
                this.difficultySelect.addEventListener('change', () => this.generateNewText());
                this.inputArea.addEventListener('input', (e) => this.handleInput(e));
                this.inputArea.addEventListener('paste', (e) => e.preventDefault());
                
                // Close modal on outside click
                document.getElementById('modalOverlay').addEventListener('click', (e) => {
                    if (e.target.id === 'modalOverlay') {
                        closeModal();
                    }
                });
            }

            setGameMode(mode) {
                this.gameMode = mode;
                if (mode === 'time') {
                    this.timeModeBtn.classList.add('active');
                    this.textModeBtn.classList.remove('active');
                    this.timeLeft = 60;
                    this.timeDisplay.textContent = '60';
                } else {
                    this.timeModeBtn.classList.remove('active');
                    this.textModeBtn.classList.add('active');
                    this.timeDisplay.textContent = '∞';
                }
                this.generateNewText();
            }

            generateNewText() {
                const difficulty = this.difficultySelect.value;
                const textArray = this.texts[difficulty];
                this.currentText = textArray[Math.floor(Math.random() * textArray.length)];
                this.displayText();
                this.resetGame();
            }

            displayText() {
                this.textDisplay.innerHTML = this.currentText
                    .split('')
                    .map((char, index) => `<span class="char" data-index="${index}">${char === ' ' ? '&nbsp;' : char}</span>`)
                    .join('');
            }

            startGame() {
                if (this.isGameActive) return;
                
                this.isGameActive = true;
                this.startTime = new Date().getTime();
                this.inputArea.disabled = false;
                this.inputArea.focus();
                this.startBtn.disabled = true;
                this.startBtn.innerHTML = '<i class="fas fa-pause"></i> En cours...';
                
                // Add current class to first character
                const firstChar = this.textDisplay.querySelector('.char');
                if (firstChar) {
                    firstChar.classList.add('current');
                }
                
                // Only start timer for time mode
                if (this.gameMode === 'time') {
                    this.timer = setInterval(() => {
                        this.timeLeft--;
                        this.timeDisplay.textContent = this.timeLeft;
                        
                        if (this.timeLeft <= 0) {
                            this.endGame();
                        }
                    }, 1000);
                }
            }

            handleInput(e) {
                if (!this.isGameActive) return;

                const inputValue = e.target.value;
                const inputLength = inputValue.length;
                this.totalTyped = inputLength;

                // Update character display
                const chars = this.textDisplay.querySelectorAll('.char');
                chars.forEach((char, index) => {
                    char.className = 'char';
                    
                    if (index < inputLength) {
                        if (inputValue[index] === this.currentText[index]) {
                            char.classList.add('correct');
                        } else {
                            char.classList.add('incorrect');
                        }
                    } else if (index === inputLength) {
                        char.classList.add('current');
                    }
                });

                // Calculate errors
                this.errors = 0;
                for (let i = 0; i < inputLength; i++) {
                    if (inputValue[i] !== this.currentText[i]) {
                        this.errors++;
                    }
                }

                this.updateStats();

                // Check if text is completed (for text mode)
                if (this.gameMode === 'text' && inputLength === this.currentText.length) {
                    this.endGame();
                }
            }

            updateStats() {
                const elapsedMinutes = (new Date().getTime() - this.startTime) / 1000 / 60;
                const wordsTyped = this.totalTyped / 5;
                const wpm = elapsedMinutes > 0 ? Math.round(wordsTyped / elapsedMinutes) : 0;
                const accuracy = this.totalTyped > 0 ? Math.round(((this.totalTyped - this.errors) / this.totalTyped) * 100) : 100;

                this.wpmDisplay.textContent = wpm;
                this.accuracyDisplay.textContent = accuracy + '%';
                this.errorsDisplay.textContent = this.errors;
            }

            endGame() {
                this.isGameActive = false;
                this.endTime = new Date().getTime();
                this.inputArea.disabled = true;
                this.startBtn.disabled = false;
                this.startBtn.innerHTML = '<i class="fas fa-play"></i> Commencer';
                
                if (this.timer) {
                    clearInterval(this.timer);
                    this.timer = null;
                }

                this.showResults();
                this.saveToHistory();
            }

            showResults() {
                const elapsedMinutes = (this.endTime - this.startTime) / 1000 / 60;
                const wordsTyped = this.totalTyped / 5;
                const finalWpm = elapsedMinutes > 0 ? Math.round(wordsTyped / elapsedMinutes) : 0;
                const finalAccuracy = this.totalTyped > 0 ? Math.round(((this.totalTyped - this.errors) / this.totalTyped) * 100) : 100;

                // Update modal content
                document.getElementById('finalWpm').textContent = finalWpm;
                document.getElementById('finalAccuracy').textContent = finalAccuracy + '%';
                document.getElementById('finalErrors').textContent = this.errors;
                document.getElementById('finalChars').textContent = this.totalTyped;

                // Show modal with animation
                showModal();
            }

            saveToHistory() {
                const elapsedMinutes = (this.endTime - this.startTime) / 1000 / 60;
                const wordsTyped = this.totalTyped / 5;
                const wpm = elapsedMinutes > 0 ? Math.round(wordsTyped / elapsedMinutes) : 0;
                const accuracy = this.totalTyped > 0 ? Math.round(((this.totalTyped - this.errors) / this.totalTyped) * 100) : 100;
                
                const result = {
                    date: new Date().toLocaleString(),
                    wpm: wpm,
                    accuracy: accuracy,
                    errors: this.errors,
                    chars: this.totalTyped,
                    mode: this.gameMode,
                    difficulty: this.difficultySelect.value
                };
                
                this.history.unshift(result); // Add to beginning of array
                if (this.history.length > 10) {
                    this.history.pop(); // Keep only last 10 results
                }
                
                localStorage.setItem('typingHistory', JSON.stringify(this.history));
                this.loadHistory();
            }

            loadHistory() {
                this.historyList.innerHTML = '';
                
                if (this.history.length === 0) {
                    this.historyList.innerHTML = '<p style="text-align: center; color: var(--text-secondary)">Aucun historique pour le moment</p>';
                    return;
                }
                
                this.history.forEach((item, index) => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    
                    historyItem.innerHTML = `
                        <div class="history-wpm">${item.wpm} MPM</div>
                        <div class="history-details">
                            <div class="history-detail">
                                <span class="history-value">${item.accuracy}%</span>
                                <span class="history-label">Précision</span>
                            </div>
                            <div class="history-detail">
                                <span class="history-value">${item.errors}</span>
                                <span class="history-label">Erreurs</span>
                            </div>
                            <div class="history-detail">
                                <span class="history-value">${item.mode === 'time' ? 'Temps' : 'Texte'}</span>
                                <span class="history-label">Mode</span>
                            </div>
                            <div class="history-detail">
                                <span class="history-value">${item.date}</span>
                                <span class="history-label">Date</span>
                            </div>
                        </div>
                    `;
                    
                    this.historyList.appendChild(historyItem);
                });
            }

            clearHistory() {
                this.history = [];
                localStorage.removeItem('typingHistory');
                this.loadHistory();
            }

            resetGame() {
                this.isGameActive = false;
                this.currentIndex = 0;
                this.startTime = null;
                this.endTime = null;
                this.timeLeft = this.gameMode === 'time' ? 60 : Infinity;
                this.errors = 0;
                this.totalTyped = 0;

                if (this.timer) {
                    clearInterval(this.timer);
                    this.timer = null;
                }

                this.inputArea.value = '';
                this.inputArea.disabled = true;
                this.startBtn.disabled = false;
                this.startBtn.innerHTML = '<i class="fas fa-play"></i> Commencer';

                // Reset displays
                this.timeDisplay.textContent = this.gameMode === 'time' ? '60' : '∞';
                this.wpmDisplay.textContent = '0';
                this.accuracyDisplay.textContent = '100%';
                this.errorsDisplay.textContent = '0';

                // Reset text display
                const chars = this.textDisplay.querySelectorAll('.char');
                chars.forEach((char, index) => {
                    char.className = 'char';
                    if (index === 0) {
                        char.classList.add('current');
                    }
                });
            }
        }

        // Initialize the game when the page loads
        let typingGame;
        document.addEventListener('DOMContentLoaded', () => {
            typingGame = new TypingGame();
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 100) {
                navbar.style.background = 'rgba(10, 10, 10, 0.95)';
                navbar.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.3)';
            } else {
                navbar.style.background = 'rgba(10, 10, 10, 0.8)';
                navbar.style.boxShadow = 'none';
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Escape to close modal
            if (e.key === 'Escape') {
                closeModal();
            }
            
            // Ctrl+R to restart (prevent default browser refresh)
            if (e.ctrlKey && e.key === 'r' && document.getElementById('gameWrapper').style.display !== 'none') {
                e.preventDefault();
                typingGame.resetGame();
            }
        });

        // Add some Easter eggs
        let konami = [];
        const konamiCode = [
            'ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',
            'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight',
            'KeyB', 'KeyA'
        ];

        document.addEventListener('keydown', (e) => {
            konami.push(e.code);
            if (konami.length > konamiCode.length) {
                konami.shift();
            }
            
            if (konami.join(',') === konamiCode.join(',')) {
                // Easter egg: rainbow mode
                document.body.style.animation = 'rainbow 2s infinite';
                setTimeout(() => {
                    document.body.style.animation = '';
                }, 10000);
                konami = [];
            }
        });

        // Add rainbow animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes rainbow {
                0% { filter: hue-rotate(0deg); }
                100% { filter: hue-rotate(360deg); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>